{"version":3,"file":"background.js","sources":["app/helpers/window.js","app/env.js","app/background.js"],"sourcesContent":["// This helper remembers the size and position of your windows (and restores\n// them in that place after app relaunch).\n// Can be used for more than one window, just construct many\n// instances of it and give each different name.\n\nimport { app, BrowserWindow, screen } from 'electron';\nimport jetpack from 'fs-jetpack';\n\nexport default function (name, options) {\n\n    var userDataDir = jetpack.cwd(app.getPath('userData'));\n    var stateStoreFile = 'window-state-' + name +'.json';\n    var defaultSize = {\n        width: options.width,\n        height: options.height\n    };\n    var state = {};\n    var win;\n\n    var restore = function () {\n        var restoredState = {};\n        try {\n            restoredState = userDataDir.read(stateStoreFile, 'json');\n        } catch (err) {\n            // For some reason json can't be read (might be corrupted).\n            // No worries, we have defaults.\n        }\n        return Object.assign({}, defaultSize, restoredState);\n    };\n\n    var getCurrentPosition = function () {\n        var position = win.getPosition();\n        var size = win.getSize();\n        return {\n            x: position[0],\n            y: position[1],\n            width: size[0],\n            height: size[1]\n        };\n    };\n\n    var windowWithinBounds = function (windowState, bounds) {\n        return windowState.x >= bounds.x &&\n            windowState.y >= bounds.y &&\n            windowState.x + windowState.width <= bounds.x + bounds.width &&\n            windowState.y + windowState.height <= bounds.y + bounds.height;\n    };\n\n    var resetToDefaults = function (windowState) {\n        var bounds = screen.getPrimaryDisplay().bounds;\n        return Object.assign({}, defaultSize, {\n            x: (bounds.width - defaultSize.width) / 2,\n            y: (bounds.height - defaultSize.height) / 2\n        });\n    };\n\n    var ensureVisibleOnSomeDisplay = function (windowState) {\n        var visible = screen.getAllDisplays().some(function (display) {\n            return windowWithinBounds(windowState, display.bounds);\n        });\n        if (!visible) {\n            // Window is partially or fully not visible now.\n            // Reset it to safe defaults.\n            return resetToDefaults(windowState);\n        }\n        return windowState;\n    };\n\n    var saveState = function () {\n        if (!win.isMinimized() && !win.isMaximized()) {\n            Object.assign(state, getCurrentPosition());\n        }\n        userDataDir.write(stateStoreFile, state, { atomic: true });\n    };\n\n    state = ensureVisibleOnSomeDisplay(restore());\n\n    win = new BrowserWindow(Object.assign({}, options, state));\n\n    win.on('close', saveState);\n\n    return win;\n}\n","// Simple module exposes environment variables to rest of the code.\n\nimport jetpack from 'fs-jetpack';\n\nvar app;\nif (process.type === 'renderer') {\n    app = require('electron').remote.app;\n} else {\n    app = require('electron').app;\n}\nvar appDir = jetpack.cwd(app.getAppPath());\n\nvar manifest = appDir.read('package.json', 'json');\n\nexport default manifest.env;\n","// This is main process of Electron, started as first thing when your\n// app starts. This script is running through entire life of your application.\n// It doesn't have any windows which you can see on screen, but we can open\n// window from here.\n\nimport { app, Menu } from 'electron';\nimport { devMenuTemplate } from './helpers/dev_menu_template';\nimport { editMenuTemplate } from './helpers/edit_menu_template';\nimport createWindow from './helpers/window';\n\n// Special module holding environment variables which you declared\n// in config/env_xxx.json file.\nimport env from './env';\n\nvar mainWindow,session;\n\nvar setApplicationMenu = function () {\n    var menus = [editMenuTemplate];\n    if (env.name !== 'production') {\n        menus.push(devMenuTemplate);\n    }\n    Menu.setApplicationMenu(Menu.buildFromTemplate(menus));\n};\n\napp.on('ready', function () {\n    // setApplicationMenu();\n\n    var mainWindow = createWindow('main', {\n        width: 1800,\n        height: 750\n    });\n\n    mainWindow.loadURL('file://' + __dirname + '/index.html');\n    session = require('electron').session;\n    // console.log(mainWindow.webContents.session);\n    // var ses = session.fromPartition('persist:name');\n\n    // var cookie = {url: 'http://www.analytics.walmart.com', name: 'first_time',\n    //   value: 'true',expirationDate:1527678562,httpOnly:false\n    // };\n    //\n    //\n    // session.defaultSession.cookies.get({'http://www.analytics.walmart.com'}, function(error, cookies){\n    //   if(cookies.length == 0){\n    //     session.defaultSession.cookies.set(cookie, function(error) {\n    //       if (error)\n    //         console.error(error);\n    //     });\n    //\n    //   }\n    // });\n\n\n\n    // ses.cookies.set({\n    //   url:\"http://analytics-blr.walmart.com\",\n    //   name:\"VizCreator\",\n    //   value:\"True\"\n    // }, function(data){\n    //   console.log(data);\n    // });\n\n    if (env.name !== 'production') {\n        mainWindow.openDevTools();\n    }\n});\n\napp.on('window-all-closed', function () {\n    app.quit();\n});\n"],"names":["BrowserWindow","screen","app"],"mappings":"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"}